From a78c6da0376bfb67560725aa5ea0423de1f6f7f9 Mon Sep 17 00:00:00 2001
From: Alexandru Costache <alexandru@balena.io>
Date: Mon, 11 May 2020 19:56:33 +0200
Subject: [PATCH] fsl-imx8mm-var-dart: Switch pinmux as requested

We do so according to the requirements doc at
revision from May 6.

Upstream-status: Inappropriate [configuration]
Signed-off-by: Alexandru Costache <alexandru@balena.io>
---
 arch/arm64/boot/dts/freescale/imx8mm-var-dart.dts | 22 +++++++++++++++-------
 1 file changed, 15 insertions(+), 7 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/imx8mm-var-dart.dts b/arch/arm64/boot/dts/freescale/imx8mm-var-dart.dts
index 822fcaf..6ba962f 100644
--- a/arch/arm64/boot/dts/freescale/imx8mm-var-dart.dts
+++ b/arch/arm64/boot/dts/freescale/imx8mm-var-dart.dts
@@ -171,9 +171,23 @@
 &iomuxc {
 
 	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_gpios>;
 
 	imx8mm-var-dart {
 
+		pinctrl_gpios: gpiosgrp {
+			fsl,pins = <
+				MX8MM_IOMUXC_GPIO1_IO00_GPIO1_IO0              0x140
+				MX8MM_IOMUXC_ENET_TX_CTL_GPIO1_IO22            0x140
+				MX8MM_IOMUXC_ENET_MDIO_GPIO1_IO17              0x140
+				MX8MM_IOMUXC_ENET_MDC_GPIO1_IO16               0x140
+				MX8MM_IOMUXC_GPIO1_IO11_GPIO1_IO11             0x140
+				MX8MM_IOMUXC_SAI3_TXD_GPIO5_IO1                0x140
+				MX8MM_IOMUXC_SAI3_TXC_GPIO5_IO0                0x140
+				MX8MM_IOMUXC_SPDIF_RX_GPIO5_IO4                0x140
+			>;
+		};
+
 		pinctrl_reg_usdhc2_vmmc: regusdhc2vmmc {
 			fsl,pins = <
 				MX8MM_IOMUXC_SD2_RESET_B_GPIO2_IO19		0xc1
@@ -195,8 +209,6 @@
 
 		pinctrl_fec1: fec1grp {
 			fsl,pins = <
-				MX8MM_IOMUXC_ENET_MDC_ENET1_MDC			0x3
-				MX8MM_IOMUXC_ENET_MDIO_ENET1_MDIO		0x3
 				MX8MM_IOMUXC_ENET_TD3_ENET1_RGMII_TD3		0x1f
 				MX8MM_IOMUXC_ENET_TD2_ENET1_RGMII_TD2		0x1f
 				MX8MM_IOMUXC_ENET_TD1_ENET1_RGMII_TD1		0x1f
@@ -208,7 +220,6 @@
 				MX8MM_IOMUXC_ENET_TXC_ENET1_RGMII_TXC		0x1f
 				MX8MM_IOMUXC_ENET_RXC_ENET1_RGMII_RXC		0x91
 				MX8MM_IOMUXC_ENET_RX_CTL_ENET1_RGMII_RX_CTL	0x91
-				MX8MM_IOMUXC_ENET_TX_CTL_ENET1_RGMII_TX_CTL	0x1f
 				MX8MM_IOMUXC_GPIO1_IO09_GPIO1_IO9		0x19
 			>;
 		};
@@ -318,8 +329,6 @@
 				MX8MM_IOMUXC_SAI3_RXC_SAI3_RX_BCLK		0xd6
 				MX8MM_IOMUXC_SAI3_RXD_SAI3_RX_DATA0		0xd6
 				MX8MM_IOMUXC_SAI3_TXFS_SAI3_TX_SYNC		0xd6
-				MX8MM_IOMUXC_SAI3_TXC_SAI3_TX_BCLK		0xd6
-				MX8MM_IOMUXC_SAI3_TXD_SAI3_TX_DATA0		0xd6
 				MX8MM_IOMUXC_SAI3_MCLK_SAI3_MCLK		0xd6
 			>;
 		};
@@ -339,7 +348,6 @@
 		pinctrl_spdif1: spdif1grp {
 			fsl,pins = <
 				MX8MM_IOMUXC_SPDIF_TX_SPDIF1_OUT		0xd6
-				MX8MM_IOMUXC_SPDIF_RX_SPDIF1_IN			0xd6
 			>;
 		};
 
@@ -924,7 +932,7 @@
 	phy-reset-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
 	phy-reset-duration = <10>;
 	phy-reset-on-resume;
-	status = "okay";
+	status = "disabled";
 
 	mdio {
 		#address-cells = <1>;
-- 
2.7.4

